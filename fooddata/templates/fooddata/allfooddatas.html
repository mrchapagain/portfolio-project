{% extends "fooddata/base-extended.html" %}
{% load static %}

<!--- Start of User-input section for food item -->
  {% block info_select_baseextended_fooditem %}
    <div class="py-6 text-center container">
      <h5> </h5>

      <form action="itm_tosearch", method='post'>
        {% csrf_token %}
        <label for="itm_name"> <strong> Choose food Food-Item here :> </strong> </label>
          <select id="itm_name", name="itm_name">
            {% for i in food_pair %}
            <option value="{{ i.Product_en }}"> {{ i.Product_en }} </option>
            {% endfor %}
          </select>
        <input type="submit">
      </form>

      <p><strong>Note:</strong> Choose the food-item from dropdown list to explore detail information.</p><hr> 
      <div><button onClick="window.location.reload();"> <h5>Refresh Here to get new item</h5></button></div><br>
    </div>
  {% endblock info_select_baseextended_fooditem %}


<!--- Start of info-display section for food item -->
  {% block info_display_baseextended_fooditem %}
  <div class="container" style="background-color:#e8f0ef">
      <h4> Name of food-item: {{name_choosen.Product_en.values}}</h4>
      <div class="row"> <br>

          <!--- To make two pie chart display side by side-->        
          <!--Pie chart for item-->
          <div class="col">
            <h5> Share of CO2 contribution</h5> <hr>
              {% if co2_foodplots_item %}
                <a> <img class="bd-placeholder-img card-img-top" class= "img-fluid" src="data:image/png;base64, {{ co2_foodplots_item|safe }}" alt="CO2 contribiution bar chart for food category" style="width:100%"/> </a>
              {% endif %}
          </div>

          <!--Pie chart for item-energy-->
          <div class="col">
            <h5> Share of Energy ccontent </h5> <hr>
              {% if energy_foodplots_item %}
                <a> <img class="bd-placeholder-img card-img-top" class= "img-fluid" src="data:image/png;base64, {{ energy_foodplots_item|safe }}" alt="CO2 contribiution bar chart for food category" style="width:100%"/> </a>
              {% endif %}
          </div>
      </div> 

          <div class="btn-group"> <br>
            <button type="button" class="btn btn-sm btn-outline-secondary">Click the image for bigger view </button>
          </div>

    </div> <hr>

    <!--- Single data-frame of the seleted item-->
    <div class="text-center container" style="background-color:#e8f0ef"> <br>
      <h4> CO2 contribution from seleted food item</h4>
      <table style="width:100%">
      <tr>
          {% for col in name_choosen.columns %}
          <th style="white-space:nowrap"> {{col}} </th>              
          {% endfor %}
      </tr>
      {% for index, row in name_choosen.iterrows %}
      <tr>
          {% for cell in row %}
          <td> {{cell}} </td>
          {% endfor %}
      </tr>
      {% endfor %}
      </table> <br>        
    </div> <hr>

  {% endblock info_display_baseextended_fooditem %}


<!--- Start of User-input section for food group -->
  {% block info_select_baseextended_foodgroup %}
    <div class="py-6 text-center container">
      <h5> </h5>

      <form action="cat_tosearch", method='post'>
        {% csrf_token %}
        <label for="cat_name"> <strong> Choose food category here :> </strong> </label>
          <select id="cat_name", name="cat_name">
            {% for i in food_pair %}
              <optgroup label="{{ i.Category_en }}">
                {% for n in i %}
                <option value="{{ n.Product_en }}"> {{ n.Product_en }} </option> 
                {% endfor %}
              </optgroup>
            {% endfor %}

          </select>
        <input type="submit">
      </form>
    
      <p><strong>Note:</strong> Choose the food-category from dropdown list to explore detail information.</p><hr>
    </div>
  {% endblock info_select_baseextended_foodgroup %}


  {% block info_display_baseextended_foodgroup %}
    <!--- Group chart of the seleted food category-->
    <div class="container" style="background-color:#e8f0ef">
      <h3> </h3>
      
      <!--Bar chart for category-->
      <div class="col">
        <h4> Bar graph of CO2 contribution from seleted food category</h4>  <hr>
          {% if co2_foodplots_category %}
            <a> <img class="bd-placeholder-img card-img-top" class= "img-fluid" src="data:image/png;base64, {{ co2_foodplots_category|safe }}" alt="CO2 contribiution bar chart for food category" style="width:100%"/> </a>
          {% endif %}
      </div>

      <div class="btn-group"> <br>
        <button type="button" class="btn btn-sm btn-outline-secondary">Click the image for bigger view </button>
      </div>

    </div> <hr>
    {% endblock info_display_baseextended_foodgroup %}
