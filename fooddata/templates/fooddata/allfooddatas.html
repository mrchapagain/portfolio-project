{% extends "fooddata/base-extended.html" %}
{% load static %}

<!--- Start of User-input section for food item -->
  {% block info_select_baseextended_fooditem %}
    <div class="py-6 text-center container">
      <h5> </h5>

      <form action="itm_tosearch", method='post'>
        {% csrf_token %}
        <label for="itm_name"> <strong> Choose food Food-Item here :> </strong> </label>
          <select id="itm_name", name="itm_name">
            {% for i in food_pair %}
            <option value="{{ i.Product_en }}"> {{ i.Product_en }} <strong>( {{ i.Category_en }} )</strong></option>
            {% endfor %}
          </select>
          <button type="submit" value="Submit" > Click to Submit </button>
      </form>

      <p><strong>Note:</strong> Choose the food-item from dropdown list to explore detail information.</p><hr> 
    </div>
  {% endblock info_select_baseextended_fooditem %}


<!--- Start of info-display section for food item -->
  {% block info_display_baseextended_fooditem %}
  <div class="container" style="background-color:#e8f0ef">
      <h4> Name of food-item: {{ name_choosen }}</h4>
      <div class="row"> <br>

          <!--- To make two pie chart display side by side-->        
          <!--Pie chart for item-->
          <div class="col">
            <h5> Share of CO2 contribution</h5> <hr>
              {% if co2_foodplots_item %}
                <a> <img class="bd-placeholder-img card-img-top" class= "img-fluid" src="data:image/png;base64, {{ co2_foodplots_item|safe }}" alt="CO2 contribiution bar chart for food iem" style="width:100%"/> </a>
              {% endif %}
          </div>

          <!--Pie chart for item-energy-->
          <div class="col">
            <h5> Share of Energy content </h5> <hr>
              {% if energy_foodplots_item %}
                <a> <img class="bd-placeholder-img card-img-top" class= "img-fluid" src="data:image/png;base64, {{ energy_foodplots_item|safe }}" alt="CO2 contribiution bar chart for food item" style="width:100%"/> </a>
              {% endif %}
          </div>
      </div> 

          <div class="btn-group"> <br>
            <button type="button" class="btn btn-sm btn-outline-secondary">Click the image for bigger view </button>
          </div>

    </div> <hr>

    <!--- Single data-frame of the seleted item-->
    <div class="text-center container" style="background-color:#e8f0ef"> <br>
      <h4> CO2 contribution from seleted food_item</h4>
      <table style="width:100%">
      <tr>
          {% for col in choosen_item_data.columns %}
          <th style="white-space:nowrap"> {{col}} </th>              
          {% endfor %}
      </tr>
      {% for index, row in choosen_item_data.iterrows %}
      <tr>
          {% for cell in row %}
          <td> {{cell}} </td>
          {% endfor %}
      </tr>
      {% endfor %}
      </table> <br>        
    </div> <hr>

  {% endblock info_display_baseextended_fooditem %}


<!--- Start of User-input section for food group -->
  {% block info_select_baseextended_foodgroup %}
    <div class="py-6 text-center container">
      <h5> </h5>

      <form action="cat_tosearch", method='post'>
        {% csrf_token %}
        <label for="cat_name"> <strong> Choose food category here :> </strong> </label>
          <select id="cat_name", name="cat_name">

            {% for cat in food_cat_list %}
            <option value="{{ cat }}"> <strong> {{ cat }} </strong> </option>
            {% endfor %}

          </select>
        <button type="submit" value="Submit" onclick="openUserinpt(event, 'food_group')"> Click to Submit </button>
      </form>
    
      <p><strong>Note:</strong> Choose the food-category from dropdown list to explore detail information.</p><hr>
    </div>
  {% endblock info_select_baseextended_foodgroup %}


  {% block info_display_baseextended_foodgroup %}

  <div class="container" style="background-color:#e8f0ef">
    <h4> Name of food-category: {{ category_choosen }}</h4>
    <div class="row"> <br>

        <!--- To make two pie chart display side by side-->        
        <!--Pie chart for item-->
        <div class="col">
          <h5> Share of average CO2 contribution from {{ category_choosen }} </h5> <hr>
            {% if co2_category_piechart %}
              <a> <img class="bd-placeholder-img card-img-top" class= "img-fluid" src="data:image/png;base64, {{ co2_category_piechart|safe }}" alt="CO2 contribiution bar chart for food category" style="width:100%"/> </a>
            {% endif %}
        </div>

         <!--- Analytic massage of the piechart choosen,, data came from modddel-->
         <div class="col">
          <h4>   </h4> Interpretation of the chart <hr>
            {% if massage %}
            <p style="width:100%"> {{ massage }}</p>
            {% endif %}
        </div>

    </div> 

        <div class="btn-group"> <br>
          <button type="button" class="btn btn-sm btn-outline-secondary">Click the image for bigger view </button>
        </div>

  </div> <hr>

  {% endblock info_display_baseextended_foodgroup %}
